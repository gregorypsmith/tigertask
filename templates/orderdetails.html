{% extends "base.html" %}

{% block title %}Order details{% endblock title %}

{% block content %}
{% include 'navbardeliver.html' %}
<div class="container">
    <h4 class="mb-4">Order details</h4>
    <div class="row">
        <div class="col-md-4 col-lg-3">
            <!-- Customer info card -->
            {% for cust in cust_info %}
            <div class="card mb-4">
                <div class="card-body">
                    <h5 class="card-title">Customer info</h5>
                    <p class="card-text"><strong>Name</strong><br> {{cust.name}}</p>
                    <p class="card-text"><strong>Phone number</strong><br> {{cust.phone_number}}</p>
                    <p class="card-text"><strong>Email</strong><br> {{cust.email}}</p>
                </div>
            </div>
            {% endfor %}

            <!-- Order info card -->
            <div class="card mb-4">
                <div class="card-body">
                    <h5 class="card-title">Order info</h5>
                    <p class="card-text"><strong>Status</strong><br> {{order.status}} </p>
                    <p class="card-text"><strong>Building</strong><br> {{order.building}} </p>
                    <p class="card-text"><strong>Room number</strong><br> {{order.roomnum}} </p>
                    <p class="card-text"><strong>Note</strong><br> {{order.note}} </p>
                    <p class="card-text"><strong>Price</strong><br> ${{order.price}} </p>
                    <p class="card-text"><strong>Time placed</strong><br> {{order.time_placed}} </p>
                </div>
            </div>
        </div>
        <div class="col-md-8 col-lg-9 mb-4">
            <div class="row">
                <!-- Item cards -->
                {% for item in item_info %}
                <div class="col-md-6 col-lg-4 mb-4">
                    <div class="card h-100">
                        <div class="card-body">
                            <h5 class="card-title">Item info</h5>
                            <p class="card-text"><strong>Item name</strong><br> {{item.name}}</p>
                            <p class="card-text"><strong>Total price</strong><br> ${{item.total_price}}</p>
                            <p class="card-text"><strong>Price</strong><br> ${{item.price}}</p>
                            <p class="card-text"><strong>Quantity</strong><br> {{item.quantity}}</p>
                            {% if item.in_stock == "True" %}
                            <a href="/orderdetails?details_id={{order.id}}&out_of_stock_id={{item.id}}">Mark as Out of Stock</a>
                            {% else %}
                            <a href="/orderdetails?details_id={{order.id}}&in_stock_id={{item.id}}">Mark as In Stock</a>
                            {% endif %}

                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
</div>

{% endblock content %}