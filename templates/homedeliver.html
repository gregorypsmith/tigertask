{% extends "base.html" %}

{% block title %}Available Deliveries{% endblock title %}

{% block content %}
    {% include 'navbardeliver.html' %}
    <div class="container">
        <div class="row col-sm-12">
            <h4 class="my-4">Available deliveries</h4>
        </div>
        <div class="row col-sm-12">
            <!--This commented out code is a jinja2 loop that allows us to display all available deliveries. It requires a 2D list with each delivery and its info-->

            <!--
        {#
            {% if deliveries[0]|length == 0: %}
            <p>No deliveries to display.</p>
        {% else: %}
    <table>
        <tr>
            <th> Location </th>
            <th> Items </th>
            <th> Price </th>
            <th> Date Placed </th>
            <th> Claim </th>
        </tr>
        
        {%    for n in range(deliveries|length): %}
            <tr>
            <td>
            {{deliveries[0][n]}}
            </td>
            <td>
                {{deliveries[1][n]}}
            </td>
            <td>
                {{deliveries[2][n]}}
            </td>
            <td>
                {{deliveries[3][n]}}
            </td>
            <td>
            <button>Claim Order</button>>
            </td>
            </tr>
                        {%    endfor %}
                    {% endif %}
    </table>
    #}
-->
            <table class="table">
                <thead>
                    <tr>
                        <th scope="col">Customer Name</th>
                        <th scope="col">Customer Contact</th>
                        <th scope="col">Location </th>
                        <th scope="col">Price </th>
                        <th scope="col">Time Placed </th>
                        <th scope="col">Items </th>
                        <th scope="col">Claim </th>
                    </tr>
                </thead>
                <tbody>
                    {% for result in results %}
                    <tr>
                        <td>{{result.name}}</td>
                        <td>{{result.phone_number}}</td>
                        <td>{{result.building}} {{result.roomnum}}</td>
                        <td>${{result.price}}</td>
                        <td>{{result.time_placed}}</td>
                        <td>
                            <form action="/orderdetails" method="GET">
                                <input type="hidden" name="details_id" value="{{result.id}}" />
                                <button class="btn btn-primary" type='submit'>See More</button>
                            </form>
                        </td>
                        <td>
                            <form action="/claimorder" method="GET">
                                <input type="hidden" name="claimed_id" value="{{result.id}}" />
                                <button class="btn btn-primary" type='submit'>Claim now!</button>
                            </form>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
{% endblock content %}
